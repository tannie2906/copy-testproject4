<div class="folder-page">
  <!-- Header Section -->
  <section class="hero">
    <h1 class="hero-title">Secure & Effortless File Sharing</h1>
    <p class="hero-description">
      Share and manage your files with top-notch security and simplicity.
    </p>

    <!-- Create Button with Dropdown -->
    <div class="dropdown">
      <button class="dropdown-button">Create</button>
      <div class="dropdown-content">
        <a href="#" (click)="onCreateFolder()">Folder</a>
        <a href="#" (click)="onCreateDocument()">Document</a>
      </div>
    </div>

    <!-- Upload Button -->
     <!-- Upload Button -->
<div class="dropdown">
  <button class="dropdown-button" (click)="toggleUploadDropdown()">Upload</button>
  <div class="dropdown-content" *ngIf="uploadDropdownVisible">
    <!-- File Button -->
    <label class="dropdown-item" for="file-upload">
      File
    </label>
    <input
      id="file-upload"
      type="file"
      multiple
      (change)="onUploadFile($event)"
      style="display: none;"
    />

    <!-- Folder Button -->
    <label class="dropdown-item" for="folder-upload">
      Folder
    </label>
    <input
      id="folder-upload"
      type="file"
      webkitdirectory
      mozdirectory
      (change)="onUploadFolder($event)"
      style="display: none;"
    />
  </div>
</div>





     <!-- start here -->
  
     
    <!-- delete here -->

  <!-- Starred Files Button -->
  <div class="files-header">
    <h2 *ngIf="!showStarredFiles">Your Files</h2>
    <h2 *ngIf="showStarredFiles">Starred Files</h2>
    <button class="toggle-button" (click)="toggleStarredView()">
      <span class="star-icon">
        {{ showStarredFiles ? '⭐' : '⭐' }}
      </span>
    </button>
  </div>

  <!-- Files Section -->
  <section class="file-section">
    <table class="file-table">
      <thead>
        <tr>
          <th (click)="sortFiles('name')" style="cursor: pointer;">
            Name
            <span *ngIf="sortOrder['name'] === 'asc'">▲</span>
            <span *ngIf="sortOrder['name'] === 'desc'">▼</span>
          </th>
          <th (click)="sortFiles('size')" style="cursor: pointer;">
            Size
            <span *ngIf="sortOrder['size'] === 'asc'">▲</span>
            <span *ngIf="sortOrder['size'] === 'desc'">▼</span>
          </th>
          <th>Who can access</th>
          <th (click)="sortFiles('modified')" style="cursor: pointer;">
            Modified
            <span *ngIf="sortOrder['modified'] === 'asc'">▲</span>
            <span *ngIf="sortOrder['modified'] === 'desc'">▼</span>
          </th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>

        <tr *ngFor="let file of (showStarredFiles ? starredFiles : files)">
          <!-- Folder -->
          <div *ngIf="file.isFolder" (click)="onOpenFolder(file.id)">
            <i class="fa fa-folder"></i>
            <a>{{ file.name }}</a>
          </div>
          <!-- File -->
          <div *ngIf="!file.isFolder">
            <a (click)="onOpenFile(file, $event)">
              <i class="fa fa-file"></i>
              {{ file.name }}
            </a>
          </div>

          <!-- File Size -->
          <td>{{ file.isFolder ? '--' : formatFileSize(file.size) }}</td>

          <!-- Owner Information -->
          <td>Owner: {{ file.owner?.username }}</td>

          <!-- Modified Date -->
          <td>{{ file.created_at | date: 'medium' }}</td>

          <!-- Actions -->
          <td class="actions">
            <!-- Star Toggle -->
            <button (click)="toggleStar(file)" aria-label="Toggle star">
              <span [class]="file.isStarred ? 'starred-icon' : 'unstarred-icon'">★</span>
            </button>

            <!-- Dropdown Menu -->
            <div class="dropdown">
              <button class="more-button" (click)="toggleDropdown(file)">⋮</button>
              <div
                class="dropdown-menu"
                [ngClass]="{ 'adjust-position': file.adjustDropdown }"
                *ngIf="file.showDropdown"
              >
                <button (click)="renameFile(file.id)">Rename</button>
                <button (click)="deleteFile(file.id)">Delete</button>
                <button (click)="downloadFile(file.id)">Download</button>
                <button (click)="shareFile(file.id)">Share</button>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Rename Dialog -->
  <div *ngIf="selectedFileId">
    <input type="text" [(ngModel)]="newFileName" placeholder="Enter new name" />
    <button (click)="renameFile(selectedFileId)">Save</button>
    <button (click)="selectedFileId = null">Cancel</button>
  </div>

  <!-- process uploads-->
  <div *ngIf="uploading">
    <p>Uploading...</p>
    <div *ngIf="progress !== null">
      <progress [value]="progress" max="100"></progress>
      <p>{{ progress }}%</p>
    </div>
  </div>
  

